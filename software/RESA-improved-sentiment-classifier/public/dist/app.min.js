!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){(function(){function baseIndexOf(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1}function cacheIndexOf(cache,value){var type=typeof value;if(cache=cache.cache,"boolean"==type||null==value)return cache[value]?0:-1;"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value;return cache=(cache=cache[type])&&cache[key],"object"==type?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if("boolean"==type||null==value)cache[value]=!0;else{"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});"object"==type?(typeCache[key]||(typeCache[key]=[])).push(value):typeCache[key]=!0}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){for(var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;++index<length;){var value=ac[index],other=bc[index];if(value!==other){if(value>other||"undefined"==typeof value)return 1;if(other>value||"undefined"==typeof other)return-1}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&"object"==typeof first&&mid&&"object"==typeof mid&&last&&"object"==typeof last)return!1;var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache.undefined=!1;var result=getObject();for(result.array=array,result.cache=cache,result.push=cachePush;++index<length;)result.push(array[index]);return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function releaseArray(array){array.length=0,arrayPool.length<maxPoolSize&&arrayPool.push(array)}function releaseObject(object){var cache=object.cache;cache&&releaseObject(cache),object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null,objectPool.length<maxPoolSize&&objectPool.push(object)}function slice(array,start,end){start||(start=0),"undefined"==typeof end&&(end=array?array.length:0);for(var index=-1,length=end-start||0,result=Array(0>length?0:length);++index<length;)result[index]=array[start+index];return result}function runInContext(context){function lodash(value){return value&&"object"==typeof value&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll,this.__wrapped__=value}function baseBind(bindData){function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];return setBindData(bound,bindData),bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if("undefined"!=typeof result)return result}var isObj=isObject(value);if(!isObj)return value;var className=toString.call(value);if(!cloneableClasses[className])return value;var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:return result=ctor(value.source,reFlags.exec(value)),result.lastIndex=value.lastIndex,result}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];result=isArr?ctor(value.length):{}}else result=isArr?slice(value):assign({},value);return isArr&&(hasOwnProperty.call(value,"index")&&(result.index=value.index),hasOwnProperty.call(value,"input")&&(result.input=value.input)),isDeep?(stackA.push(value),stackB.push(result),(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)}),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result):result}function baseCreate(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function baseCreateCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if("undefined"==typeof thisArg||!("prototype"in func))return func;var bindData=func.__bindData__;if("undefined"==typeof bindData&&(support.funcNames&&(bindData=!func.name),bindData=bindData||!support.funcDecomp,!bindData)){var source=fnToString.call(func);support.funcNames||(bindData=!reFuncName.test(source)),bindData||(bindData=reThis.test(source),setBindData(func,bindData))}if(bindData===!1||bindData!==!0&&1&bindData[1])return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if((partialRightArgs||isCurry)&&(args||(args=slice(arguments)),partialRightArgs&&push.apply(args,partialRightArgs),isCurry&&args.length<arity))return bitmask|=16,baseCreateWrapper([func,isCurryBound?bitmask:-4&bitmask,args,null,thisArg,arity]);if(args||(args=arguments),isBindKey&&(func=thisBinding[key]),this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5],isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isCurryBound=8&bitmask,key=func;return setBindData(bound,bindData),bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);cache?(indexOf=cacheIndexOf,values=cache):isLarge=!1}for(;++index<length;){var value=array[index];indexOf(values,value)<0&&result.push(value)}return isLarge&&releaseObject(values),result}function baseFlatten(array,isShallow,isStrict,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];if(value&&"object"==typeof value&&"number"==typeof value.length&&(isArray(value)||isArguments(value))){isShallow||(value=baseFlatten(value,isShallow,isStrict));var valIndex=-1,valLength=value.length,resIndex=result.length;for(result.length+=valLength;++valIndex<valLength;)result[resIndex++]=value[valIndex]}else isStrict||result.push(value)}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if("undefined"!=typeof result)return!!result}if(a===b)return 0!==a||1/a==1/b;var type=typeof a,otherType=typeof b;if(!(a!==a||a&&objectTypes[type]||b&&objectTypes[otherType]))return!1;if(null==a||null==b)return a===b;var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass&&(className=objectClass),otherClass==argsClass&&(otherClass=objectClass),className!=otherClass)return!1;switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped)return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB);if(className!=objectClass)return!1;var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&"constructor"in a&&"constructor"in b)return!1}var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==a)return stackB[length]==b;var size=0;if(result=!0,stackA.push(a),stackB.push(b),isArr){if(length=a.length,size=b.length,result=size==length,result||isWhere)for(;size--;){var index=length,value=b[size];if(isWhere)for(;index--&&!(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)););else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB)))break}}else forIn(b,function(value,key,b){return hasOwnProperty.call(b,key)?(size++,result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)):void 0}),result&&!isWhere&&forIn(a,function(value,key,a){return hasOwnProperty.call(a,key)?result=--size>-1:void 0});return stackA.pop(),stackB.pop(),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){for(var stackLength=stackA.length;stackLength--;)if(found=stackA[stackLength]==source){value=stackB[stackLength];break}if(!found){var isShallow;callback&&(result=callback(value,source),(isShallow="undefined"!=typeof result)&&(value=result)),isShallow||(value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}),stackA.push(source),stackB.push(value),isShallow||baseMerge(value,source,callback,stackA,stackB)}}else callback&&(result=callback(value,source),"undefined"==typeof result&&(result=source)),"undefined"!=typeof result&&(value=result);object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf,seen=cache}for(;++index<length;){var value=array[index],computed=callback?callback(value,index,array):value;(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)&&((callback||isLarge)&&seen.push(computed),result.push(value))}return isLarge?(releaseArray(seen.array),releaseObject(seen)):callback&&releaseArray(seen),result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}else forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)});return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isPartial=16&bitmask,isPartialRight=32&bitmask;if(!isBindKey&&!isFunction(func))throw new TypeError;isPartial&&!partialArgs.length&&(bitmask&=-17,isPartial=partialArgs=!1),isPartialRight&&!partialRightArgs.length&&(bitmask&=-33,isPartialRight=partialRightArgs=!1);var bindData=func&&func.__bindData__;if(bindData&&bindData!==!0)return bindData=slice(bindData),bindData[2]&&(bindData[2]=slice(bindData[2])),bindData[3]&&(bindData[3]=slice(bindData[3])),!isBind||1&bindData[1]||(bindData[4]=thisArg),!isBind&&1&bindData[1]&&(bitmask|=8),!isCurry||4&bindData[1]||(bindData[5]=arity),isPartial&&push.apply(bindData[2]||(bindData[2]=[]),partialArgs),isPartialRight&&unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs),bindData[1]|=bitmask,createWrapper.apply(null,bindData);var creater=1==bitmask||17===bitmask?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return"function"==typeof value&&reNative.test(value)}function shimIsPlainObject(value){var ctor,result;return value&&toString.call(value)==objectClass&&(ctor=value.constructor,!isFunction(ctor)||ctor instanceof ctor)?(forIn(value,function(value,key){result=key}),"undefined"==typeof result||hasOwnProperty.call(value,result)):!1}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==argsClass||!1}function clone(value,isDeep,callback,thisArg){return"boolean"!=typeof isDeep&&null!=isDeep&&(thisArg=callback,callback=isDeep,isDeep=!1),baseClone(value,isDeep,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,!0,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}function findKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function findLastKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwnRight(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;for(callback=baseCreateCallback(callback,thisArg,3);length--&&callback(pairs[length--],pairs[length],object)!==!1;);return object}function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;for(callback=baseCreateCallback(callback,thisArg,3);length--;){var key=props[length];if(callback(object[key],key,object)===!1)break}return object}function functions(object){var result=[];return forIn(object,function(value,key){isFunction(value)&&result.push(key)}),result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object){for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===!0||value===!1||value&&"object"==typeof value&&toString.call(value)==boolClass||!1}function isDate(value){return value&&"object"==typeof value&&toString.call(value)==dateClass||!1}function isElement(value){return value&&1===value.nodeType||!1}function isEmpty(value){var result=!0;if(!value)return result;var className=toString.call(value),length=value.length;return className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&"number"==typeof length&&isFunction(value.splice)?!length:(forOwn(value,function(){return result=!1}),result)}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,"function"==typeof callback&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return"function"==typeof value}function isObject(value){return!(!value||!objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||value&&"object"==typeof value&&toString.call(value)==numberClass||!1}function isRegExp(value){return value&&"object"==typeof value&&toString.call(value)==regexpClass||!1}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&toString.call(value)==stringClass||!1}function isUndefined(value){return"undefined"==typeof value}function mapValues(object,callback,thisArg){var result={};return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){result[key]=callback(value,key,object)}),result}function merge(object){var args=arguments,length=2;if(!isObject(object))return object;if("number"!=typeof args[2]&&(length=args.length),length>3&&"function"==typeof args[length-2])var callback=baseCreateCallback(args[--length-1],args[length--],2);else length>2&&"function"==typeof args[length-1]&&(callback=args[--length]);for(var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();++index<length;)baseMerge(object,sources[index],callback,stackA,stackB);return releaseArray(stackA),releaseArray(stackB),object}function omit(object,callback,thisArg){var result={};if("function"!=typeof callback){var props=[];forIn(object,function(value,key){props.push(key)}),props=baseDifference(props,baseFlatten(arguments,!0,!1,1));for(var index=-1,length=props.length;++index<length;){var key=props[index];result[key]=object[key]}}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)||(result[key]=value)});return result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if("function"!=typeof callback)for(var index=-1,props=baseFlatten(arguments,!0,!1,1),length=isObject(object)?props.length:0;++index<length;){var key=props[index];key in object&&(result[key]=object[key])}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)&&(result[key]=value)});return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(null==accumulator)if(isArr)accumulator=[];else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}return callback&&(callback=lodash.createCallback(callback,thisArg,4),(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})),accumulator}function values(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function at(collection){for(var args=arguments,index=-1,props=baseFlatten(args,!0,!1,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);++index<length;)result[index]=collection[props[index]];return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=!1;return fromIndex=(0>fromIndex?nativeMax(0,length+fromIndex):fromIndex)||0,isArray(collection)?result=indexOf(collection,target,fromIndex)>-1:"number"==typeof length?result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1:forOwn(collection,function(value){return++index>=fromIndex?!(result=value===target):void 0}),result}function every(collection,callback,thisArg){var result=!0;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&(result=!!callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)});return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];callback(value,index,collection)&&result.push(value)}else forOwn(collection,function(value,index,collection){callback(value,index,collection)&&result.push(value)});return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"!=typeof length){var result;return forOwn(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}for(;++index<length;){var value=collection[index];if(callback(value,index,collection))return value}}function findLast(collection,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forEachRight(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;++index<length&&callback(collection[index],index,collection)!==!1;);else forOwn(collection,callback);return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;length--&&callback(collection[length],length,collection)!==!1;);else{var props=keys(collection);length=props.length,forOwn(collection,function(value,key,collection){return key=props?props[--length]:--length,callback(collection[key],key,collection)})}return collection}function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)}),result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=lodash.createCallback(callback,thisArg,3),"number"==typeof length)for(var result=Array(length);++index<length;)result[index]=callback(collection[index],index,collection);else result=[],forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)});return result}function max(collection,callback,thisArg){var computed=-1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];value>result&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);current>computed&&(computed=current,result=value)});return result}function min(collection,callback,thisArg){var computed=1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];result>value&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);computed>current&&(computed=current,result=value)});return result}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if("number"==typeof length)for(noaccum&&(accumulator=collection[++index]);++index<length;)accumulator=callback(accumulator,collection[index],index,collection);else forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)});return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;return callback=lodash.createCallback(callback,thisArg,4),forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)}),accumulator}function reject(collection,callback,thisArg){return callback=lodash.createCallback(callback,thisArg,3),filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&"number"!=typeof collection.length&&(collection=values(collection)),null==n||guard)return collection?collection[baseRandom(0,collection.length-1)]:undefined;var result=shuffle(collection);return result.length=nativeMin(nativeMax(0,n),result.length),result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand],result[rand]=value}),result}function size(collection){var length=collection?collection.length:0;return"number"==typeof length?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&!(result=callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))});return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array("number"==typeof length?length:0);for(isArr||(callback=lodash.createCallback(callback,thisArg,3)),forEach(collection,function(value,key,collection){var object=result[++index]=getObject();isArr?object.criteria=map(callback,function(key){return value[key]}):(object.criteria=getArray())[0]=callback(value,key,collection),object.index=index,object.value=value}),length=result.length,result.sort(compareAscending);length--;){var object=result[length];result[length]=object.value,isArr||releaseArray(object.criteria),releaseObject(object)}return result}function toArray(collection){return collection&&"number"==typeof collection.length?slice(collection):values(collection)}function compact(array){for(var index=-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];value&&result.push(value)}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,!0,!0,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length;)if(callback(array[index],index,array))return index;return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);length--;)if(callback(array[length],length,array))return length;return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=-1;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[0]:undefined;return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){return"boolean"!=typeof isShallow&&null!=isShallow&&(thisArg=callback,callback="function"!=typeof isShallow&&thisArg&&thisArg[isShallow]===array?null:isShallow,isShallow=!1),null!=callback&&(array=map(array,callback,thisArg)),baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if("number"==typeof fromIndex){var length=array?array.length:0;fromIndex=0>fromIndex?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:callback||n;return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();++argsIndex<argsLength;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&(args.push(value),caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen)))}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:for(;++index<length;){var cache=caches[0];if(value=array[index],(cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){for(argsIndex=argsLength,(cache||seen).push(value);--argsIndex;)if(cache=caches[argsIndex],(cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0)continue outer;result.push(value)}}for(;argsLength--;)cache=caches[argsLength],cache&&releaseObject(cache);return releaseArray(caches),releaseArray(seen),result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[length-1]:undefined;return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;for("number"==typeof fromIndex&&(index=(0>fromIndex?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1);index--;)if(array[index]===value)return index;return-1}function pull(array){for(var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;++argsIndex<argsLength;)for(var index=-1,value=args[argsIndex];++index<length;)array[index]===value&&(splice.call(array,index--,1),length--);return array}function range(start,end,step){start=+start||0,step="number"==typeof step?step:+step||1,null==end&&(end=start,start=0);for(var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];for(callback=lodash.createCallback(callback,thisArg,3);++index<length;){var value=array[index];callback(value,index,array)&&(result.push(value),splice.call(array,index--,1),length--)}return result}function rest(array,callback,thisArg){if("number"!=typeof callback&&null!=callback){var n=0,index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:nativeMax(0,callback);return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;for(callback=callback?lodash.createCallback(callback,thisArg,1):identity,value=callback(value);high>low;){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,!0,!0))}function uniq(array,isSorted,callback,thisArg){return"boolean"!=typeof isSorted&&null!=isSorted&&(thisArg=callback,callback="function"!=typeof isSorted&&thisArg&&thisArg[isSorted]===array?null:isSorted,isSorted=!1),null!=callback&&(callback=lodash.createCallback(callback,thisArg,3)),baseUniq(array,isSorted,callback)
}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){for(var index=-1,length=arguments.length;++index<length;){var array=arguments[index];if(isArray(array)||isArguments(array))var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}return result||[]}function zip(){for(var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(0>length?0:length);++index<length;)result[index]=pluck(array,index);return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};for(values||!length||isArray(keys[0])||(values=[]);++index<length;){var key=keys[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function after(n,func){if(!isFunction(func))throw new TypeError;return function(){return--n<1?func.apply(this,arguments):void 0}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){for(var funcs=arguments.length>1?baseFlatten(arguments,!0,!1,1):functions(object),index=-1,length=funcs.length;++index<length;){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){for(var funcs=arguments,length=funcs.length;length--;)if(!isFunction(funcs[length]))throw new TypeError;return function(){for(var args=arguments,length=funcs.length;length--;)args=[funcs[length].apply(this,args)];return args[0]}}function curry(func,arity){return arity="number"==typeof arity?arity:+arity||func.length,createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if(!isFunction(func))throw new TypeError;if(wait=nativeMax(0,wait)||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0),trailing="trailing"in options?options.trailing:trailing);var delayed=function(){var remaining=wait-(now()-stamp);if(0>=remaining){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)},maxDelayed=function(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))};return function(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result}}function defer(func){if(!isFunction(func))throw new TypeError;var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func))throw new TypeError;var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func))throw new TypeError;var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};return memoized.cache={},memoized}function once(func){var ran,result;if(!isFunction(func))throw new TypeError;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),func=null,result)}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=!0,trailing=!0;if(!isFunction(func))throw new TypeError;return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?options.leading:leading,trailing="trailing"in options?options.trailing:trailing),debounceOptions.leading=leading,debounceOptions.maxWait=wait,debounceOptions.trailing=trailing,debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(null==func||"function"==type)return baseCreateCallback(func,thisArg,argCount);if("object"!=type)return property(func);var props=keys(func),key=props[0],a=func[key];return 1!=props.length||a!==a||isObject(a)?function(object){for(var length=props.length,result=!1;length--&&(result=baseIsEqual(object[props[length]],func[props[length]],null,!0)););return result}:function(object){var b=object[key];return a===b&&(0!==a||1/a==1/b)}}function escape(string){return null==string?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=!0,methodNames=source&&functions(source);source&&(options||methodNames.length)||(null==options&&(options=source),ctor=lodashWrapper,source=object,object=lodash,methodNames=functions(source)),options===!1?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];isFunc&&(ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result))return this;result=new ctor(result),result.__chain__=chainAll}return result})})}function noConflict(){return context._=oldDash,this}function noop(){}function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=null==min,noMax=null==max;if(null==floating&&("boolean"==typeof min&&noMax?(floating=min,min=1):noMax||"boolean"!=typeof max||(floating=max,noMax=!0)),noMin&&noMax&&(max=1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||""),options=defaults({},options,settings);var isEvaluating,imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable,hasVariable=variable;hasVariable||(variable="obj",source="with ("+variable+") {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){throw e.source=source,e}return data?result(data):(result.source=source,result)}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);for(callback=baseCreateCallback(callback,thisArg,1);++index<n;)result[index]=callback(index);return result}function unescape(string){return null==string?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(null==prefix?"":prefix)+id}function chain(value){return value=new lodashWrapper(value),value.__chain__=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this.__chain__=!0,this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayRef=[],objectProto=Object.prototype,oldDash=context._,toString=objectProto.toString,reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift,defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}(),nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,ctorByClass={};ctorByClass[arrayClass]=Array,ctorByClass[boolClass]=Boolean,ctorByClass[dateClass]=Date,ctorByClass[funcClass]=Function,ctorByClass[objectClass]=Object,ctorByClass[numberClass]=Number,ctorByClass[regexpClass]=RegExp,ctorByClass[stringClass]=String,lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext),support.funcNames="string"==typeof Function.name,lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}},nativeCreate||(baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}());var setBindData=defineProperty?function(func,value){descriptor.value=value,defineProperty(func,"__bindData__",descriptor)}:noop,isArray=nativeIsArray||function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==arrayClass||!1},shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable)hasOwnProperty.call(iterable,index)&&result.push(index);return result},keys=nativeKeys?function(object){return isObject(object)?nativeKeys(object):[]}:shimKeys,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes=invert(htmlEscapes),reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g"),assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;if(argsLength>3&&"function"==typeof args[argsLength-2])var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2);else argsLength>2&&"function"==typeof args[argsLength-1]&&(callback=args[--argsLength]);for(;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],result[index]=callback?callback(result[index],iterable[index]):iterable[index];return result},defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;for(var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],"undefined"==typeof result[index]&&(result[index]=iterable[index]);return result},forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable)if(callback(iterable[index],index,collection)===!1)return result;return result},forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)if(index=ownProps[ownIndex],callback(iterable[index],index,collection)===!1)return result;return result},isPlainObject=getPrototypeOf?function(value){if(!value||toString.call(value)!=objectClass)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1}),groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)}),indexBy=createAggregator(function(result,value,key){result[key]=value}),pluck=map,where=filter,now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()},parseInt=8==nativeParseInt(whitespace+"08")?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};return lodash.after=after,lodash.assign=assign,lodash.at=at,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.chain=chain,lodash.compact=compact,lodash.compose=compose,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.createCallback=createCallback,lodash.curry=curry,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.filter=filter,lodash.flatten=flatten,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.map=map,lodash.mapValues=mapValues,lodash.max=max,lodash.memoize=memoize,lodash.merge=merge,lodash.min=min,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.partialRight=partialRight,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.pull=pull,lodash.range=range,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.shuffle=shuffle,lodash.sortBy=sortBy,lodash.tap=tap,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.values=values,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.collect=map,lodash.drop=rest,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,lodash.unzip=zip,mixin(lodash),lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.contains=contains,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.lastIndexOf=lastIndexOf,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.result=result,lodash.runInContext=runInContext,lodash.size=size,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.template=template,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.all=every,lodash.any=some,lodash.detect=find,lodash.findWhere=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.include=contains,lodash.inject=reduce,mixin(function(){var source={};return forOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.first=first,lodash.last=last,lodash.sample=sample,lodash.take=first,lodash.head=first,forOwn(lodash,function(func,methodName){var callbackable="sample"!==methodName;lodash.prototype[methodName]||(lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return chainAll||null!=n&&(!guard||callbackable&&"function"==typeof n)?new lodashWrapper(result,chainAll):result})}),lodash.VERSION="2.4.1",lodash.prototype.chain=wrapperChain,lodash.prototype.toString=wrapperToString,lodash.prototype.value=wrapperValueOf,lodash.prototype.valueOf=wrapperValueOf,forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}}),forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments),this}}),forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}}),lodash}var undefined,arrayPool=[],objectPool=[],idCounter=0,keyPrefix=+new Date+"",largeArraySize=75,maxPoolSize=40,whitespace=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reFuncName=/^\s*function[ \n\r\t]+\w/,reInterpolate=/<%=([\s\S]+?)%>/g,reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)"),reNoMatch=/($^)/,reThis=/\bthis\b/,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],templateCounter=0,argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]",cloneableClasses={};cloneableClasses[funcClass]=!1,cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=!0;var debounceOptions={leading:!1,maxWait:0,trailing:!1},descriptor={configurable:!1,enumerable:!1,value:null,writable:!1},objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var _=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(require,module){module.exports=function(app){app.controller("HomeController",["$scope",require("./controllers/home.js")]),app.controller("RegisterController",["$scope",require("./controllers/register.js")]),app.controller("ProfileController",["$scope",require("./controllers/profile.js")]),app.controller("CreateCorpusController",["$scope",require("./controllers/createcorpus.js")]),app.controller("ResaController",["$scope","$http","$sce",require("./controllers/resa/resa.js")])}},{"./controllers/createcorpus.js":9,"./controllers/home.js":10,"./controllers/profile.js":11,"./controllers/register.js":12,"./controllers/resa/resa.js":16}],3:[function(require,module){var CoocProcesser=require("../../modules/CoocProcesser"),d3=window.d3||null,matrix_mouseover=function(p){var g=d3.select(this).node();$("#"+g.id).css("cursor","pointer"),d3.selectAll(".row text").classed("active",function(d,i){return i===p.y}),d3.selectAll(".column text").classed("active",function(d,i){return i===p.x})},matrix_mouseout=function(){d3.selectAll("text").classed("active",!1)},matrix_order=function(svg,orders,x,value){x.domain(orders[value]);var t=svg.transition().duration(1500);t.selectAll(".row").delay(function(d,i){return 4*x(i)}).attr("transform",function(d,i){return"translate(0,"+x(i)+")"}).selectAll(".cell").delay(function(d){return 4*x(d.x)}).attr("x",function(d){return x(d.x)}),t.selectAll(".column").delay(function(d,i){return 4*x(i)}).attr("transform",function(d,i){return"translate("+x(i)+")rotate(-90)"})},createCoocMatrix=function(miserables,container){var margin={top:80,right:0,bottom:10,left:80},width=1e3,height=1e3,x=d3.scale.ordinal().rangeBands([0,width]),z=d3.scale.linear().domain([0,4]).clamp(!0),c=d3.scale.category20().domain(d3.range(20)),svg=d3.select(container).append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).style("margin-left",-margin.left+"px").append("g").attr("transform","translate("+margin.left+","+margin.top+")"),matrix=[],nodes=miserables.nodes,n=nodes.length;nodes.forEach(function(node,i){node.index=i,node.count=0,matrix[i]=d3.range(n).map(function(j){return{x:j,y:i,z:0}})}),miserables.links.forEach(function(link){matrix[link.source][link.target].z+=link.value,matrix[link.target][link.source].z+=link.value,matrix[link.source][link.source].z+=link.value,matrix[link.target][link.target].z+=link.value,nodes[link.source].count+=link.value,nodes[link.target].count+=link.value});var orders={name:d3.range(n).sort(function(a,b){return d3.ascending(nodes[a].name,nodes[b].name)}),count:d3.range(n).sort(function(a,b){return nodes[b].count-nodes[a].count}),group:d3.range(n).sort(function(a,b){return nodes[b].group-nodes[a].group})};x.domain(orders.name),svg.append("rect").attr("class","cell-background").attr("width",width).attr("height",height);var processRow=function(row){d3.select(this).selectAll(".cell").data(row.filter(function(d){return d.z})).enter().append("rect").attr("class","cell").attr("x",function(d){return x(d.x)}).attr("width",x.rangeBand()).attr("height",x.rangeBand()).attr("id",function(d){return"rel_"+nodes[d.x].index+"_"+nodes[d.y].index}).style("fill-opacity",function(d){return z(d.z)}).style("fill",function(d){return nodes[d.x].group===nodes[d.y].group?c(nodes[d.x].group):null}).on("mouseover",matrix_mouseover).on("mouseout",function(d){matrix_mouseout(d)})},row=svg.selectAll(".row").data(matrix).enter().append("g").attr("class","row").attr("transform",function(d,i){return"translate(0,"+x(i)+")"}).each(processRow);row.append("line").attr("x2",width),row.append("text").attr("x",-6).attr("y",x.rangeBand()/2).attr("dy",".32em").attr("text-anchor","end").attr("id",function(d,i){return"node_"+nodes[i].index}).attr("title",function(d,i){return nodes[i].uri}).text(function(d,i){return nodes[i].name});var column=svg.selectAll(".column").data(matrix).enter().append("g").attr("class","column").attr("transform",function(d,i){return"translate("+x(i)+")rotate(-90)"});column.append("line").attr("x1",-width),column.append("text").attr("x",6).attr("y",x.rangeBand()/2).attr("dy",".32em").attr("id",function(d,i){return"node_"+nodes[i].index}).attr("title",function(d,i){return nodes[i].uri}).attr("text-anchor","start").text(function(d,i){return nodes[i].name}),$(container).append('<div class="matrix-color-legend"><table cellpadding="5" cellspacing="3"></table></div>');var not_repeat=[];$.each(miserables.nodes,function(i,v){-1===not_repeat.indexOf(v.group)&&(not_repeat.push(v.group),$(container+" .matrix-color-legend table").append('<tr style="color:#FFF;background-color:'+c(v.group)+'"><td>'+miserables.groups[v.group]+"</td></tr>"))}),$(container+" .matrix-color-legend").attr("style","position:absolute;top:300px;right:10px;overflow:hidden;");setTimeout(function(){matrix_order(svg,orders,x,"group")},500)};module.exports=function($scope){$.getJSON("/api/corpus/"+$scope.currentCorpus._id+"/cooc",function(data){var processedData=CoocProcesser.processData(data);createCoocMatrix(processedData,"#coocContainer")})}},{"../../modules/CoocProcesser":24}],4:[function(require,module){var facetsData,types,entities,articles,FacetsProcesser=require("../../modules/FacetsProcesser");module.exports=function($scope,$state,$sce){$scope.typeFilter=void 0,$scope.entityFilter=void 0,$scope.articleFilter=void 0,$scope.setFilter=function(item){switch(item.type){case"article":$scope.articleFilter=$scope.articleFilter===item.id?void 0:item.id;break;case"entity":$scope.entityFilter=$scope.entityFilter===item.id?void 0:item.id;break;case"type":$scope.typeFilter=$scope.typeFilter===item.id?void 0:item.id}},$scope.itemActive=function(item){switch(item.type){case"article":return $scope.articleFilter===item.id;case"entity":return $scope.entityFilter===item.id;case"type":return $scope.typeFilter===item.id}},$scope.facetFilter=function(item){var filterArticle=!1,filterEntity=!1,filterType=!1;switch(item.type){case"article":return filterEntity=void 0!==$scope.entityFilter?-1!==item.entities.indexOf($scope.entityFilter):!0,filterType=void 0!==$scope.typeFilter?-1!==item.types.indexOf($scope.typeFilter):!0,filterEntity&&filterType;case"entity":return filterArticle=void 0!==$scope.articleFilter?-1!==item.articles.indexOf($scope.articleFilter):!0,filterType=void 0!==$scope.typeFilter?-1!==item.types.indexOf($scope.typeFilter):!0,filterArticle&&filterType;case"type":return filterArticle=void 0!==$scope.articleFilter?-1!==item.articles.indexOf($scope.articleFilter):!0,filterEntity=void 0!==$scope.entityFilter?-1!==item.entities.indexOf($scope.entityFilter):!0,filterArticle&&filterEntity}},$.getJSON("/api/corpus/"+$scope.currentCorpus._id+"/facets",function(data){facetsData=FacetsProcesser.processData(data),types=facetsData.types,entities=facetsData.entities,articles=facetsData.articles;for(var i=0;i<articles.length;i++)articles[i].sourceSafe=$sce.trustAsHtml(articles[i].source);$scope.data=[{name:"Articles",values:articles},{name:"Types",values:types},{name:"Entities",values:entities}],$state.reload()})}},{"../../modules/FacetsProcesser":25}],5:[function(require,module){var extentions=require("../../data/corpusextentions"),defaultPort="8081",currentCorpus={uri:function(){var it=this.input_type;return"twitter"===it?"http://twitter.com/"+this.input:"direct"===it?"-":this.input}},initProgressWebsocket=function($scope){var location=document.location.hostname+":"+defaultPort+document.location.pathname.replace("/overview","");console.log("connecting to socket",location);var socket=new WebSocket("ws://"+location);socket.onerror=function(err){console.log(err)},socket.onopen=function(){$scope.$apply(function(){$scope.progress.show=!0})},socket.onmessage=function(event){var data=JSON.parse(event.data);$scope.$apply(function(){$scope.progress.type=data.type,"complete"==data.type?($scope.currentCorpus.articlesCount=data.articlesCount,$scope.currentCorpus.entitiesCount=data.entitiesCount):$scope.progress.progress=data.progress})},socket.onclose=function(){$scope.$apply(function(){$scope.progress.show=!1})}};module.exports=function($scope,$location,$state,corpus){currentCorpus=_.extend(currentCorpus,corpus.data),$scope.currentCorpus=currentCorpus,$scope.Math=Math,$scope.progress={show:!1,progress:0,type:""},$scope.extentions=extentions,$scope.$state=$state,$scope.$on("$viewContentLoaded",function(){currentCorpus.processed||initProgressWebsocket($scope);var len=$location.path().split("/").length;3===len&&$state.go("corpus."+extentions[0].name)})}},{"../../data/corpusextentions":19}],6:[function(require,module){module.exports=function(){}},{}],7:[function(require,module){var RelationsProcesser=require("../../modules/RelationsProcesser"),d3=window.d3||null,fade=function(opacity,svg){return function(d,i){svg.selectAll("path.chord").filter(function(d){return d.source.index!==i&&d.target.index!==i}).transition().style("stroke-opacity",opacity).style("fill-opacity",opacity)}},createRelChart=function(data,container){var matrix=data.relations,entityNames=(data.scores,data.entityNames),w=(data.entityURIs,1e3),h=900,r1=h/2,r0=r1-80,fill=d3.scale.category20c(),chord=d3.layout.chord().padding(.04).sortSubgroups(d3.descending).sortChords(d3.descending),arc=d3.svg.arc().innerRadius(r0).outerRadius(r0+20),svg=d3.select(container).append("svg:svg").attr("width",w).attr("height",h).append("svg:g").attr("transform","translate("+w/2+","+h/2+")");chord.matrix(matrix);var g=svg.selectAll("g.group").data(chord.groups).enter().append("svg:g").attr("class","group").on("mouseover",fade(.02,svg)).on("mouseout",fade(.8,svg));
g.append("svg:path").style("stroke",function(d){return fill(d.index)}).style("fill",function(d){return fill(d.index)}).attr("id",function(d){return"path_"+d.index}).attr("d",arc),g.append("svg:text").each(function(d){d.angle=(d.startAngle+d.endAngle)/2}).attr("dy",".35em").attr("id",function(d){return"label_"+d.index}).attr("text-anchor",function(d){return d.angle>Math.PI?"end":null}).attr("transform",function(d){return"rotate("+(180*d.angle/Math.PI-90)+")translate("+(r0+26)+")"+(d.angle>Math.PI?"rotate(180)":"")}).text(function(d){return entityNames[d.index]}),svg.selectAll("path.chord").data(chord.chords).enter().append("svg:path").attr("class","chord").style("stroke",function(d){return d3.rgb(fill(d.source.index)).darker()}).style("fill",function(d){return fill(d.source.index)}).attr("d",d3.svg.chord().radius(r0)),$.each(entityNames,function(i,v){$("#label_"+i).mouseover(function(){var position=$("#label_"+i).position();$("#relations").append('<div class="d3-rel-tooltip" style="top:'+(position.top+30)+"px;left:"+position.left+'px">'+v+"</div>"),$("#label_"+i).css("fill",d3.select("#path_"+i).style("fill")),$("#label_"+i).css("cursor","pointer")}),$("#label_"+i).mouseout(function(){$("#label_"+i).css("fill","#000"),$("#relations .d3-rel-tooltip").remove()})})};module.exports=function($scope){$.getJSON("/api/corpus/"+$scope.currentCorpus._id+"/relations",function(data){var processedData=RelationsProcesser.processData(data);createRelChart(processedData,"#relationsContainer")})}},{"../../modules/RelationsProcesser":26}],8:[function(require,module){var TagsProcessor=require("../../modules/TagsProcessor");module.exports=function($scope){$("#tagsContainer").html('<div id="l_tags" class="container"></div>'),$("#l_tags").css("position","absolute").css("width","100%").css("height","100%"),$.getJSON("/api/corpus/"+$scope.currentCorpus._id+"/tags",function(data){var processedData=TagsProcessor.processData(data);$("#l_tags").jQCloud(processedData,{afterCloudRender:function(){}})})}},{"../../modules/TagsProcessor":27}],9:[function(require,module){var corpusTypes=require("../data/corpusTypes.js"),nlpApis=require("../data/nlpApis.js");module.exports=function($scope){$scope.corpusTypes=corpusTypes,$scope.nlpApis=nlpApis,$scope.corpusSelection={index:0},$scope.currentCorpus=$scope.corpusTypes[0];var $inputCount,$sliderContainer,updateView=function(){$scope.currentCorpus=$scope.corpusTypes[$scope.corpusSelection.index],$scope.currentCorpus.haveItems?($inputCount?$inputCount.slider("destroy"):($sliderContainer=$("#slider_container"),$inputCount=$("#input_count")),$sliderContainer.show(),$inputCount.slider({min:$scope.currentCorpus.itemsMin,max:$scope.currentCorpus.itemsMax,step:50,value:$scope.currentCorpus.itemsDefault,tooltip:"always"})):$sliderContainer.hide()};$scope.$watch("corpusSelection",updateView,!0),$scope.$on("$viewContentLoaded",updateView),$scope.startAnalysis=function(e){e.preventDefault();var $inputItem=$("#input_item"),$inputItemArea=$("#input_item_area"),$inputItemFile=$("#input_item_file"),$inputCountField=$("input#input_count"),$newCorpusForm=$("#newcorpus_form"),$inputType=$("input[name=input_type]:checked");$inputItem.parent().removeClass("has-warning");var input=null,corpusType=$scope.currentCorpus.name,inputType=$scope.currentCorpus.inputType;switch(inputType){case"text":input=$inputItem.val().trim();break;case"textarea":input=$inputItemArea.val().trim();break;case"file":input=$inputItemFile.val()}if(!input)return void $inputItem.parent().addClass("has-warning");$newCorpusForm.attr("action","/api/corpus?_csrf="+encodeURIComponent($scope.csrf));var itemCount=$inputCount.slider("getValue");switch($inputCountField.val(itemCount),inputType){case"text":$inputItem.attr("name","input"),$inputItemArea.remove(),$inputItemFile.remove();break;case"textarea":$inputItem.remove(),$inputItemArea.attr("name","input"),$inputItemFile.remove();break;case"file":$inputItem.remove(),$inputItemArea.remove(),$inputCountField.remove(),$inputItemFile.attr("name","input")}$inputType.val(corpusType),$newCorpusForm.submit()}}},{"../data/corpusTypes.js":18,"../data/nlpApis.js":20}],10:[function(require,module){module.exports=function($scope){$scope.corpus="0",$scope.corpusSelect=function(){"0"!==$scope.corpus&&(window.location="/corpus/"+$scope.corpus)}}},{}],11:[function(require,module){module.exports=function(){}},{}],12:[function(require,module){module.exports=function(){}},{}],13:[function(require,module,exports){require("./resa");exports.createBarChart=function($scope){var interval=$scope.interval,split_interval=interval.split(" ");interval="Minutes"==split_interval[1]||"Minute"==split_interval[1]?6e4*split_interval[0]:1e3*split_interval[0],$(function(){$(document).ready(function(){Highcharts.setOptions({global:{useUTC:!1}}),$("#other").highcharts({chart:{type:"spline",animation:Highcharts.svg,marginRight:10,events:{load:function(){var series=this.series[0];setInterval(function(){var flag=!0;0==$scope.toggle_stop&&(flag=!1);var x=(new Date).getTime(),y=$scope.cumulative_sentiment;series.addPoint([x,y],flag,flag)},interval)}}},title:{text:"Live Sentiment data"},xAxis:{type:"datetime",tickPixelInterval:200},yAxis:{title:{text:"Sentiment (-1 to 1)"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>"+Highcharts.dateFormat("%Y-%m-%d %H:%M:%S",this.x)+"<br/>"+Highcharts.numberFormat(this.y,2)}},legend:{enabled:!1},exporting:{enabled:!1},credits:{enabled:!1},series:[{name:"Sentiment data",data:function(){var i,data=[],time=(new Date).getTime();for(i=-19;0>=i;i+=1)data.push({x:time+1e3*i,y:$scope.cumulative_sentiment});return data}()}]})})})}},{"./resa":16}],14:[function(require,module,exports){function bubble_tick(e){var k=.1*e.alpha;nodes.forEach(function(o){o.y+=(foci_category(o.category).y-o.y)*k,o.x+=(foci_category(o.category).x-o.x)*k}),node.select("circle").attr("cx",function(d){return d.x}).attr("cy",function(d){return d.y}),node.select("text").attr("x",function(d){return d.x}).attr("y",function(d){return d.y})}function bubble_mouseover(){d3.select(this).select("circle").style("stroke-width",3);var n_value=d3.select(this).select("text")[0][0].textContent,uri=d3.select(this).select("text")[0][0].__data__.uri,tmp=uri.split("http://dbpedia.org/resource/"),desc="";$.ajax({type:"GET",dataType:"json",url:"http://lookup.dbpedia.org/api/search/PrefixSearch?MaxHits=1&QueryString="+tmp[1],async:!1}).done(function(data){desc=data.results[0].description}),desc||(desc=""),$(d3.select(this).select("circle")).popover({title:"<b>"+n_value+"</b>",html:!0,content:'<a href="'+uri+'">'+uri+'</a><div style="text-align:justify">'+desc+"</div>",container:"body"}).popover("show")}function bubble_mouseout(){d3.select(this).classed("node-selected")||(d3.select(this).select("circle").style("stroke-width",1),d3.select(this).select("text").attr("opacity",0)),$(".popover").remove()}function bubble_mousedown(){d3.select(this).classed("node-selected")?(d3.select(this).classed("node-selected",!1),d3.select(this).select("text").attr("opacity",0)):(d3.select(this).select("circle").style("stroke-width",3),d3.select(this).select("text").attr("style","font-size:1.4em;").attr("opacity",.9),d3.select(this).classed("node-selected",!0))}var foci,force,nodes,node,width,height,rScale=d3.scale.log().domain([1,1e3]).range([12,80]),opacScale=d3.scale.log().domain([0,1]).range([.25,1]),convertToSlug=function(Text){return Text.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},restart_bubbles=function(){node=node.data(nodes);{var nn=node.enter().insert("g").attr("class","node").on("mouseover",bubble_mouseover).on("mouseout",bubble_mouseout).on("mousedown",bubble_mousedown).call(force.drag);nn.append("circle").attr("id",function(d){return d.slug_text}).attr("class","node-circle").attr("r",1).style("stroke","#999490").style("stroke-width","1").style("fill",function(d){return color(d.category)}).transition().duration(500).style("opacity",function(d){return opacScale(d.proportion)}).attr("r",function(d){return d.r})}nn.append("text").attr("id",function(d){return"t_"+d.slug_text}).attr("opacity",0).attr("text-anchor","middle").attr("class","node-text").attr("style","font-size:1.4em;").text(function(d){return d.name}),force.start()},color=function(entity_type){return"Person"==entity_type?"#d1ebbc":"Place"==entity_type?"#b7d1e7":"Organisation"==entity_type?"#da808d":"#fdf8ca"},foci_category=function(entity_type){return"Person"==entity_type?foci[3]:"Place"==entity_type?foci[1]:"Organisation"==entity_type?foci[2]:foci[0]},initializeBubble=function(){width=750,height=800;var cluster_padding_x=width/4,cluster_padding_y=height/4;foci=[{x:width/2-cluster_padding_x,y:height/2-cluster_padding_y},{x:width/2+cluster_padding_x,y:height/2-cluster_padding_y},{x:width/2-cluster_padding_x,y:height/2+cluster_padding_y},{x:width/2+cluster_padding_x,y:height/2+cluster_padding_y}],force=d3.layout.force().size([width,height]).nodes([{}]).links([]).gravity(.18).charge(-360).friction(.94).on("tick",bubble_tick);var svg=d3.select("#bubblecloud").append("svg").attr("width",width).attr("height",height);svg.append("rect").attr("width",width).attr("height",height),nodes=force.nodes(),node=svg.selectAll(".node")},visualizeBubble=function($scope,watchList,total){var val,slug_text,one_node_already_inserted=0;for(var key in watchList)if(val=watchList[key].count/total,isNaN(val)&&(val=0),slug_text=convertToSlug(key),d3.select("#bubblecloud svg").selectAll('.node-circle[id="'+slug_text+'"]').size()){var new_size=rScale(watchList[key].count);d3.select("#bubblecloud svg").select('.node-circle[id="'+slug_text+'"]').attr("r")!=new_size&&d3.select("#bubblecloud svg").select('.node-circle[id="'+slug_text+'"]').attr("r",new_size/2).transition().duration(700).attr("r",new_size)}else{var start_x=width/2,start_y=height/2;one_node_already_inserted>0&&(start_y-=15*one_node_already_inserted);{var c_size=rScale(watchList[key].count),uri=watchList[key].uri,node={x:start_x,y:start_y,name:key,n_weight:watchList[key].count,category:watchList[key].type,r:c_size,proportion:val,slug_text:slug_text,uri:uri};nodes.push(node)}one_node_already_inserted++}restart_bubbles()},clearBubbleView=function(){setTimeout(function(){d3.select("#bubblecloud svg").selectAll("g").remove()},1e3)};exports.initializeBubble=initializeBubble,exports.visualizeBubble=visualizeBubble,exports.clearBubbleView=clearBubbleView},{}],15:[function(require,module,exports){require("./resa");exports.drawGraph=function(){function next(){return{time:t+15,value:v=~~Math.max(10,Math.min(90,v+10*(Math.random()-.5)))}}function redraw(){var rect=chart.selectAll("rect").data(data,function(d){return d.time});rect.enter().insert("svg:rect","line").attr("x",function(d,i){return x(i)-.5}).attr("y",function(d){return h-y(d.value)-.5}).attr("width",w).attr("height",function(d){return y(d.value)}).transition().duration(1e3).attr("x",function(d,i){return x(i)-.5}),rect.transition().duration(1e3).attr("x",function(d,i){return x(i)-.5}),rect.exit().transition().duration(1e3).attr("x",function(d,i){return x(i-1)-.5}).remove()}var t=1297110663,v=0,data=d3.range(33).map(next);setInterval(function(){data.shift(),data.push(next()),redraw()},1500);var w=20,h=80,x=d3.scale.linear().domain([0,1]).range([0,w]),y=d3.scale.linear().domain([-5,5]).rangeRound([0,h]),chart=d3.select("body").append("svg:svg").attr("class","chart").attr("width",w*data.length-1).attr("height",h);chart.selectAll("rect").data(data).enter().append("svg:rect").attr("x",function(d,i){return x(i)-.5}).attr("y",function(d){return h-y(d.value)-.5}).attr("width",w).attr("height",function(d){return y(d.value)}),chart.append("svg:line").attr("x1",0).attr("x2",w*data.length).attr("y1",h-.5).attr("y2",h-.5).attr("stroke","#000")}},{"./resa":16}],16:[function(require,module){var _=require("lodash"),bubblecloud=require("./bubblecloud"),bar=(require("./graph"),require("./barChart")),defaultPort=(require("./saveSentiment"),"8081"),watchList=[],total_entities=0;module.exports=function($scope,$http){bubblecloud.initializeBubble(),$scope.toggle_stop=0,$scope.toggle_start=1,$scope.tweets=[],$scope.tweets_number=0,$scope.entities_number=0,$scope.cumulative_sentiment=0,$scope.reset_view=1,$scope.companies=["BMW","Toyota","Blackberry","Intel","Samsung","Sony","Vodafone","McDonald's","BBC","Amazon","Walmart","Facebook","Unilever","Goldman_Sachs","Morgan_Stanley","Microsoft","Nokia","Apple_Inc.","Google"],$scope.intervals=["5 Seconds","1 Minute","5 Minutes","15 Minutes","30 Minutes","45 Minutes","60 Minutes"],$scope.startAnalysis=function(e){e.preventDefault(),$scope.toggle_stop=1,$scope.toggle_start=0;var x=document.getElementById("companylist");x.disabled=!0;var y=document.getElementById("intervallist");y.disabled=!0;var keyword=$scope.keyword;$http({url:"/api/resa/start/"+keyword,method:"GET"}).success(function(response){$scope.response=response,console.log("response.....",$scope.response),initStreamWebsocket($scope)}).error(function(error){$scope.error=error})},$scope.currentTab="bubblecloud",$scope.showTab=function(tabName){$scope.currentTab=tabName},$scope.stopAnalysis=function(e){e.preventDefault(),$scope.toggle_start=1,$scope.toggle_stop=0;var y=document.getElementById("intervallist");y.disabled=!1,$http({url:"/api/resa/stop",method:"GET"}).success(function(response){$scope.response=response}).error(function(error){$scope.error=error})},$scope.resetView=function(e){e.preventDefault(),watchList=[],$scope.entities_number=0,$scope.tweets=[],$scope.tweets_number=0,$scope.reset_view=0,$scope.cumulative_sentiment=0,$http({url:"/api/resa/reset",method:"GET"}).success(function(response){$scope.response=response}).error(function(error){$scope.error=error}),bubblecloud.clearBubbleView();var x=document.getElementById("companylist");x.disabled=!1,bar.createBarChart($scope)};var getEntityType=function(types){if(!types.length)return"Misc";var tmp,out="";return _.forEach(types,function(v){tmp=v.split(":"),("Place"==tmp[1]||"Person"==tmp[1]||"Organisation"==tmp[1])&&(out=tmp[1])}),out?out:"Misc"},prepareTweetText=function(text,entities){return _.forEach(entities,function(e){text=text.replace(e.name,'&nbsp;<span resource="'+e.uri+'" class="r_entity r_'+getEntityType(e.types).toLowerCase()+'" typeOf="'+e.types+'">'+e.name+"</span>&nbsp;"),updateWatchlist(e)}),text},fetchSentiment=function(keyword){$http({url:"/api/resa/initiateSentiment/"+keyword,method:"GET"}).success(function(response){var sentiment=response;sentiment=sentiment.replace(/^[a-zA-Z]+/,""),$scope.cumulative_sentiment=Number(sentiment)}).error(function(error){$scope.error=error})},updateWatchlist=function(entity){entity.name.toLowerCase()!=$scope.keyword.toLowerCase()&&(void 0==watchList[entity.name]?(watchList[entity.name]={count:1,type:getEntityType(entity.types),uri:entity.uri},$scope.entities_number++):watchList[entity.name].count++,total_entities++)},initStreamWebsocket=function($scope){bar.createBarChart($scope);var location=document.location.hostname+":"+defaultPort+document.location.pathname;console.log("connecting to socket",location);var socket=new WebSocket("ws://"+location);socket.onerror=function(err){console.log(err)},socket.onopen=function(){console.log("connection established!")},socket.onmessage=function(event){var data=JSON.parse(event.data);$scope.$apply(function(){data.text=prepareTweetText(data.text,data.entities),$scope.tweets.unshift(data),$scope.tweets_number++,bubblecloud.visualizeBubble($scope,watchList,total_entities),fetchSentiment($scope.keyword)})},socket.onclose=function(){$scope.$apply(function(){})}}}},{"./barChart":13,"./bubblecloud":14,"./graph":15,"./saveSentiment":17,lodash:1}],17:[function(){},{}],18:[function(require,module){var collection=[];collection.push({name:"feed",description:"RSS/RDF/ATOM Feed",inputType:"text",inputDescription:"URL of the RSS/RDF/ATOM feed",inputPlaceholder:"URL of your feed",haveItems:!0,itemsMin:50,itemsMax:600,itemsDefault:50}),collection.push({name:"wordpress",description:"WordPress Blog",inputType:"text",inputDescription:"Weblog URL",inputPlaceholder:"URL of the blog",haveItems:!0,itemsMin:50,itemsMax:400,itemsDefault:400}),collection.push({name:"blogger",description:"Blogger Blog",inputType:"text",inputDescription:"Weblog URL",inputPlaceholder:"URL of the blog",haveItems:!0,itemsMin:50,itemsMax:400,itemsDefault:400}),collection.push({name:"twitter",description:"Public Twitter account",inputType:"text",inputDescription:"Twitter username",inputPlaceholder:"Username",haveItems:!0,itemsMin:200,itemsMax:1500,itemsDefault:1e3}),collection.push({name:"slidewiki",description:"SlideWiki Deck",inputType:"text",inputDescription:"Deck ID",inputPlaceholder:"Deck ID",haveItems:!0,itemsMin:50,itemsMax:1e3,itemsDefault:400}),collection.push({name:"webpage",description:"Web page",inputType:"text",inputDescription:"WebPage URL",inputPlaceholder:"URL",haveItems:!1}),collection.push({name:"directinput",description:"Direct input",inputType:"textarea",inputDescription:"Your text/html",haveItems:!1}),collection.push({name:"doc",description:"Upload a document(s)",inputType:"file",inputDescription:"Document",haveItems:!1}),module.exports=collection},{}],19:[function(require,module){var collection=[];collection.push({name:"Overview",path:"/overview",controller:"CorpusOverviewController",template:"/templates/corpusOverview.html",js:require("../controllers/corpus/overview.js")}),collection.push({name:"Facets",path:"/facets",controller:"CorpusFacetsController",template:"/templates/corpusFacets.html",js:require("../controllers/corpus/facets.js")}),collection.push({name:"Entity relations",path:"/relations",controller:"CorpusRelationsController",template:"/templates/corpusEntityRelations.html",js:require("../controllers/corpus/relations.js")}),collection.push({name:"Co-occurrence matrix",path:"/cooc",controller:"CorpusCoocController",template:"/templates/corpusCooc.html",js:require("../controllers/corpus/cooc.js")}),collection.push({name:"Tag cloud",path:"/tags",controller:"CorpusTagsController",template:"/templates/corpusTags.html",js:require("../controllers/corpus/tags.js")}),module.exports=collection},{"../controllers/corpus/cooc.js":3,"../controllers/corpus/facets.js":4,"../controllers/corpus/overview.js":6,"../controllers/corpus/relations.js":7,"../controllers/corpus/tags.js":8}],20:[function(require,module){var collection=[];collection.push({id:"DBpedia-Spotlight",name:"DBpedia Spotlight"}),collection.push({id:"FOX",name:"FOX"}),collection.push({id:"DBpedia-Spotlight-DE",name:"DBpedia Spotlight (German)"}),module.exports=collection},{}],21:[function(require,module){module.exports=function(){}},{}],22:[function(require){var app=(require("./modules/corpus"),angular.module("context-app",["ngRoute","ngAnimate","mgcrea.ngStrap","ngSanitize","CorpusModule"]));require("./routes")(app),require("./services")(app),require("./controllers")(app),require("./directives")(app),require("./filters")(app)},{"./controllers":2,"./directives":21,"./filters":23,"./modules/corpus":28,"./routes":29,"./services":30}],23:[function(require,module){module.exports=function(){}},{}],24:[function(require,module,exports){var diceMetric=function(x,y,xy){return 2*xy/(x+y)},getCommonArticles=function(entity,entityDouble){return _.intersection(entity.articles,entityDouble.articles)},processData=function(corpus){var entitiesMin,entitiesMax,entitiesAvg,entities={},types=[],entitiesTotal=0;corpus.articles.forEach(function(article){var count=article.entities.length;entitiesTotal+=count,entitiesMin=_.min([entitiesMin,count]),entitiesMax=_.max([entitiesMin,count]),article.entities.forEach(function(entity){entities[entity.uri]?(entities[entity.uri].count++,entities[entity.uri].articles.push(article._id)):(entities[entity.uri]=entity,entities[entity.uri].count=1,entities[entity.uri].articles=[article._id]),entity.types.forEach(function(type){-1===types.indexOf(type)&&types.push(type)})})}),entitiesAvg=Math.floor(entitiesTotal/corpus.articles.length);var ekey,entity,nodes=[],links=[],groups=[],scores=[],entityNames=[],entityURIs=[],index=0,tmp=[];for(ekey in entities){entity=entities[ekey],entityURIs.push(entity.uri);var type=entity.types[0],typeId=types.indexOf(type);groups[typeId]=type,-1===entityNames.indexOf(entity.name)?(entityNames.push(entity.name),nodes.push({name:entity.name,uri:entity.uri,group:typeId})):(index++,entityNames.push(entity.name+"#"+index),nodes.push({name:entity.name+"#"+index,uri:entity.uri,group:typeId}))}for(ekey in entities){entity=entities[ekey];var score=[];for(var ekey2 in entities){var entityDouble=entities[ekey2];if(entity.uri!==entityDouble.uri){var key=entity._id+"-"+entityDouble._id,reverseKey=entityDouble._id+"-"+entity._id;if(-1===tmp.indexOf(key)&&-1===tmp.indexOf(reverseKey)){var common=getCommonArticles(entity,entityDouble),scoreValue=[diceMetric(entity.articles.length,entityDouble.articles.length,common.length)];score.push(scoreValue),links.push({source:entityURIs.indexOf(entity.uri),target:entityURIs.indexOf(entityDouble.uri),value:common?common.length:0,articles:common})}}}scores.push(score)}var sortedScores=[];scores.forEach(function(score){score.forEach(function(num){num>0&&(sortedScores.push(num[0]),threshold+=num)})}),sortedScores=sortedScores.sort();var center=Math.floor(sortedScores.length/2),threshold=sortedScores[center];return scores.forEach(function(row,index){threshold>score&&(links[index].value=0,links[index].articles="")}),{nodes:nodes,links:links,groups:groups}};exports.processData=processData},{}],25:[function(require,module,exports){var escapeRegExp=function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},processData=function(data){var articles=[],types=[],typeNames=[],entities=[],entityNames=[];data.articles.forEach(function(item){var title="";try{var dom=$(item.source);title=item.title||dom.text()}catch(e){title=item.source}title=title.slice(0,30)+"...";for(var article={id:item._id,name:title,type:"article",count:0,entities:[],types:[],source:item.source},sourceText=S(item.source).stripTags().s,srcText=sourceText.split(/\s/),src=item.source.split(/\s/),i=0;i<srcText.length;i++){var it=srcText[i];it=it.split("/"),srcText[i]=it}srcText=_.flatten(srcText);var findSourceIndex=function(word,cleanWord,entityName,startIndex){startIndex=startIndex||-1;var sourceIndex=src.indexOf(word,startIndex);if(-1===sourceIndex)for(var i=0;i<src.length;i++){var srcWord=src[i],srcWordClean=srcWord.replace(/href="(.+?)"(.*?>?)/,"").replace(/src="(.+?)"(.*?>?)/,"").replace(/alt="(.+?)"(.*?>?)/,"");if(-1===srcWordClean.indexOf("span%marked%")&&srcWordClean.match(new RegExp(matchRegStart+escapeRegExp(cleanWord)+matchReg))&&i>=startIndex){sourceIndex=i;break}}return sourceIndex},cleanReg=/(^[\W]+)|([\W]+$)/g,matchRegStart="",matchReg="(\\W?)";item.entities.forEach(function(entity){var entityParts=entity.name.split(" ");if(1===entityParts.length)srcText.forEach(function(word){{var cleanWord=word.replace(cleanReg,"");entity.name.replace(cleanReg,"")}if(cleanWord!==entity.name&&word!==entity.name);else{var sourceIndex=findSourceIndex(word,cleanWord,entity.name);if(-1!==sourceIndex){var origSrc=src[sourceIndex],link=origSrc.match(/href="(.+?)"/),img=origSrc.match(/src="(.+?)"/),alt=origSrc.match(/alt="(.+?)"/);link&&(link=link[1],origSrc=origSrc.replace(link,"%link%")),img&&(img=img[1],origSrc=origSrc.replace(img,"%img%")),alt&&(alt=alt[1],origSrc=origSrc.replace(alt,"%alt%")),src[sourceIndex]=origSrc.replace(entity.name,'<span%marked% class="label label-warning hasTooltip" data-toggle="tooltip" title="'+entity.types.join(" ")+'">'+entity.name+"</span%marked%>"),link&&(src[sourceIndex]=src[sourceIndex].replace("%link%",link)),img&&(src[sourceIndex]=src[sourceIndex].replace("%img%",img)),alt&&(src[sourceIndex]=src[sourceIndex].replace("%alt%",alt))}}});else{var firstWord=entityParts[0],lastWord=entityParts[entityParts.length-1];srcText.forEach(function(word,index){var cleanWord=word.replace(cleanReg,"");if(-1===cleanWord.indexOf("span%marked%")){var match=null!==firstWord.match(new RegExp(matchRegStart+escapeRegExp(cleanWord)+matchReg));if(match){var i=0;for(i=1;i<entityParts.length;i++)if(!(index+i>=srcText.length)){var nextCleanWord=srcText[index+i].replace(cleanReg,"");-1===nextCleanWord.indexOf("span%marked%")&&(match=match&&null!==entityParts[i].match(new RegExp(matchRegStart+escapeRegExp(nextCleanWord)+matchReg)))}if(match){var sourceStartIndex=findSourceIndex(word,cleanWord,firstWord,index),endIndex=index+entityParts.length-1;if(endIndex>=srcText.length)return;var endWord=srcText[endIndex],endCleanWord=endWord.replace(/[^\w]/,""),sourceEndIndex=findSourceIndex(endWord,endCleanWord,lastWord,endIndex);-1!==sourceStartIndex&&-1!==sourceEndIndex&&Math.abs(sourceStartIndex-sourceEndIndex)<5&&(src[sourceStartIndex]=src[sourceStartIndex].replace(new RegExp(escapeRegExp(firstWord)+"$"),'<span%marked% class="label label-warning hasTooltip" data-toggle="tooltip" title="'+entity.types.join(" ")+'">'+firstWord),src[sourceEndIndex]=src[sourceEndIndex].replace(lastWord,lastWord+"</span%marked%>"))}}else;}})}var newEntity,ind=entityNames.indexOf(entity.name);-1!==ind?(newEntity=entities[ind],entities[ind].count+=1,-1===entities[ind].articles.indexOf(article.id)&&entities[ind].articles.push(article.id),-1===article.entities.indexOf(newEntity.id)&&article.entities.push(newEntity.id)):(newEntity={id:entity._id,name:entity.name,type:"entity",count:1,articles:[article.id],types:[]},article.entities.push(newEntity.id)),entity.types.forEach(function(type){var name=type.split(":")[1],tid="type_"+name,ind=typeNames.indexOf(name);-1!==ind?(types[ind].count+=1,types[ind].entities.push(newEntity.id),types[ind].articles.push(article.id),-1===newEntity.types.indexOf(tid)&&newEntity.types.push(tid),-1===article.types.indexOf(tid)&&article.types.push(tid)):(types.push({id:tid,name:name,type:"type",count:1,entities:[newEntity.id],articles:[article.id]}),-1===newEntity.types.indexOf(tid)&&newEntity.types.push("type_"+name),-1===article.types.indexOf(tid)&&article.types.push("type_"+name),typeNames.push(name))}),-1===ind&&(entities.push(newEntity),entityNames.push(newEntity.name))}),item.source=src.join(" ").replace(/span%marked%/g,"span"),article.source=item.source,articles.push(article)});var sortFunction=function(a,b){return b.count-a.count};return entities=entities.sort(sortFunction),types=types.sort(sortFunction),{articles:articles,types:types,entities:entities}};exports.processData=processData},{}],26:[function(require,module,exports){var diceMetric=function(x,y,xy){return 2*xy/(x+y)},getCommonArticles=function(entity,entityDouble){var common=_.intersection(entity.articles,entityDouble.articles);return common?common.length:0},processData=function(corpus){var entitiesMin,entitiesMax,entitiesAvg,entities={},entitiesTotal=0;corpus.articles.forEach(function(article){var count=article.entities.length;entitiesTotal+=count,entitiesMin=_.min([entitiesMin,count]),entitiesMax=_.max([entitiesMin,count]),article.entities.forEach(function(entity){entities[entity.uri]?(entities[entity.uri].count++,entities[entity.uri].articles.push(article._id)):(entities[entity.uri]=entity,entities[entity.uri].count=1,entities[entity.uri].articles=[article._id])})}),entitiesAvg=Math.floor(entitiesTotal/corpus.articles.length);var relations=[],scores=[],entityNames=[],entityURIs=[],index=0,tmp=[],tmp4=[];for(var ekey in entities){var entity=entities[ekey],row=[],score=[];for(var ekey2 in entities){var entityDouble=entities[ekey2];if(entity.uri===entityDouble.uri)row.push(0),score.push(0);else{var key=entity._id+"-"+entityDouble._id,reverseKey=entityDouble._id+"-"+entity._id;if(-1!==tmp.indexOf(key))row.push(tmp[key]),score.push(tmp4[key]);else if(-1!==tmp.indexOf(reverseKey))row.push(tmp[reverseKey]),score.push(tmp4[reverseKey]);else{var commonCount=getCommonArticles(entity,entityDouble);tmp[key]=commonCount,row.push(tmp[key]),tmp4[key]=[diceMetric(entity.articles.length,entityDouble.articles.length,commonCount)],score.push(tmp4[key])}}}-1===entityNames.indexOf(entity.name)?entityNames.push(entity.name):(index++,entityNames.push(entity.name+"#"+index)),entityURIs.push(entity.uri),relations.push(row),scores.push(score)}var sortedScores=[];scores.forEach(function(score){score.forEach(function(num){num>0&&(sortedScores.push(num[0]),threshold+=num)})}),sortedScores=sortedScores.sort();var center=Math.floor(sortedScores.length/2),threshold=sortedScores[center];return scores.forEach(function(row,index){row.forEach(function(score,subindex){threshold>score&&(relations[index][subindex]=0)})}),{relations:relations,scores:scores,entityNames:entityNames,entityURIs:entityURIs}};exports.processData=processData},{}],27:[function(require,module,exports){var processData=function(corpus){var word_list=[];for(var key in corpus.tags)word_list.push({text:corpus.tags[key].name,weight:corpus.tags[key].count,link:{href:key,target:"_blank"}});return word_list};exports.processData=processData},{}],28:[function(require,module){var extentions=require("../data/corpusextentions"),corpusModule=angular.module("CorpusModule",["ui.router"]);corpusModule.config(function($stateProvider){$stateProvider.state("corpus",{url:"/corpus/:id",controller:require("../controllers/corpus/main"),templateUrl:"/templates/corpusView.html",resolve:{corpus:["$http","$stateParams",function($http,$stateParams){return $http({method:"GET",url:"/api/corpus/"+$stateParams.id})}]}}),extentions.forEach(function(ex){$stateProvider.state("corpus."+ex.name,{url:ex.path,templateUrl:ex.template,controller:ex.controller})})}),extentions.forEach(function(ex){corpusModule.controller(ex.controller,["$scope","$state","$sce",ex.js])}),module.exports=corpusModule},{"../controllers/corpus/main":5,"../data/corpusextentions":19}],29:[function(require,module){module.exports=function(app){app.config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/",{controller:"HomeController",template:""}),$routeProvider.when("/auth",{controller:"LoginController",template:""}),$routeProvider.when("/register",{controller:"RegisterController",template:""}),$routeProvider.when("/createCorpus",{controller:"CreateCorpusController",templateUrl:"/templates/createCorpus.html"}),$routeProvider.when("/resa",{controller:"ResaController",templateUrl:"/templates/resa.html"}),$locationProvider.html5Mode(!0)}])}},{}],30:[function(require,module){module.exports=function(){}},{}]},{},[22]);